<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task form for career and self-exploration</title>
  <style>
    /* Your CSS styles here */
  </style>
</head>
<body>
  <div class="form-wrapper">
    <h3>2023 Reentry - WDEA Activity</h3>
    <div id="replacementText" style="display: none;">
      <p>Thanks for being consistent with your logs!</p>
      <p>Keep it up! We will see you back here tomorrow.</p>
      <p>Don't forget to follow up with your advocate at the end of the week to look at any patterns that may already be emerging.</p>
      <p>You know what they say...</p>
      <div id="quoteContainer"></div>
    </div>
    <iframe id="myIFrame" src="https://docs.google.com/forms/d/e/1FAIpQLSecZ5NHv9E0uj35bUzhB7ad3Z6jjmpWbyPi7v9DCivxlzvPQQ/viewform?embedded=true"></iframe>
  </div>

  <script>
    // Make a request to the server API and handle the response
    fetch('api/quotes/random')
      .then(response => response.json())
      .then(data => {
        if (data.status) {
          // Access the quote and category from the response data
          const quote = data.quote;
          const category = data.category;

          const quoteContainer = document.getElementById('quoteContainer');
          quoteContainer.innerHTML = quote;

          const handleFormSubmit = () => {
            // Hide the form and show the replacement text
            const formElement = document.getElementById('myIFrame');
            const replacementTextElement = document.getElementById('replacementText');
            formElement.style.display = 'none';
            replacementTextElement.style.display = 'block';
          };

          const handleHeightChange = () => {
            const iframe = document.getElementById('myIFrame');
            const replacementTextElement = document.getElementById('replacementText');
            const replacementTextPosition = iframe.offsetHeight + 10;

            // Set the position of the replacement text
            replacementTextElement.style.position = 'absolute';
            replacementTextElement.style.top = `${replacementTextPosition}px`;
          };

          window.addEventListener('resize', handleHeightChange);

          const formElement = document.getElementById('myIFrame');
          formElement.addEventListener('load', () => {
            // Wait for the form inside the iframe to load
            const formContent = formElement.contentDocument || formElement.contentWindow.document;

            // Attach event listener to the form submission event inside the iframe
            formContent.addEventListener('submit', handleFormSubmit);

            // Attach event listener to the iframe resize event
            formElement.contentWindow.addEventListener('resize', handleHeightChange);
          });
        }
      })
      .catch(error => {
        console.error('Error:', error);
      });
  </script>
</body>
</html>
